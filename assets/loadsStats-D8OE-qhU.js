import{_ as v,r as g,s as w,c as x,a as u,b as a,w as n,f as B,x as p,o as C,h as S,n as d,t as b}from"./index-DGcrJ-bL.js";const h={class:"container"},k={__name:"loadsStats",setup(y){const c=g([]),m=async()=>{try{const o=await B.loadingStats();c.value=o.data}catch(o){console.error("Ошибка при загрузке статистики:",o)}},f=()=>{const o=["ФИО студента","E-mail","Загруженный файл","Дата загрузки","Результат загрузки"],t=c.value.map(e=>[e.full_name,e.email,e.file,e.upload_date,e.status==="positive"?"Успешно":"Ошибка"]),r="\uFEFF"+[o.join(";"),...t.map(e=>e.join(";"))].join(`
`),l=new Blob([r],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");i.href=URL.createObjectURL(l),i.download="statistics.csv",i.click()};return w(()=>{m()}),(o,t)=>{const s=p("el-table-column"),_=p("el-table"),r=p("el-button");return C(),x("div",h,[t[1]||(t[1]=u("img",{src:S,alt:"Логотип",class:"logo"},null,-1)),t[2]||(t[2]=u("h1",{class:"title"},"Статистика загрузок",-1)),a(_,{data:c.value,class:"table",style:{width:"100%"}},{default:n(()=>[a(s,{prop:"full_name",label:"ФИО студента",align:"center"}),a(s,{prop:"email",label:"E-mail",align:"center"}),a(s,{prop:"file",label:"Загруженный файл",align:"center"},{default:n(l=>[d(b(l.row.file),1)]),_:1}),a(s,{prop:"upload_date",label:"Дата загрузки",align:"center"}),a(s,{prop:"status",label:"Результат загрузки",align:"center"},{default:n(l=>[d(b(l.row.status==="positive"?"Успешно":"Ошибка"),1)]),_:1})]),_:1},8,["data"]),a(r,{class:"export-button",onClick:f},{default:n(()=>t[0]||(t[0]=[d(" Выгрузить в CSV ")])),_:1})])}}},V=v(k,[["__scopeId","data-v-008c4dcc"]]);export{V as default};
