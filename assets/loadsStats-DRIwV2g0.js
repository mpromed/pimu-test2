import{_ as C,r as u,s as g,c as x,a as d,b as o,w as _,f as k,x as r,o as B,h as S,j,y}from"./index-B8tfgXD2.js";const E={class:"container"},M={__name:"loadsStats",setup(R){const m=u([]),s=u([]),p=y(),f=async()=>{try{const e=await k.loadingStats();m.value=e.data,s.value=b(e.data)}catch(e){console.error("Ошибка при загрузке статистики:",e)}},b=e=>e.flatMap(t=>t.documents&&t.documents.length>0?t.documents.map(a=>({full_name:t.full_name,email:t.email,details:a.name,id:a.id})):t.error_comment?{full_name:t.full_name,email:t.email,details:t.error_comment}:{full_name:t.full_name,email:t.email,details:"Нет данных"}),v=e=>{e.id&&p.push(`/SingleClinrec/${e.id}`)},h=()=>{const e=["ФИО студента","E-mail","Подробности"],t=s.value.map(l=>[l.full_name,l.email,l.details]),n="\uFEFF"+[e.join(";"),...t.map(l=>l.join(";"))].join(`
`),w=new Blob([n],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a");c.href=URL.createObjectURL(w),c.download="statistics.csv",c.click()};return g(()=>{f()}),(e,t)=>{const a=r("el-table-column"),i=r("el-table"),n=r("el-button");return B(),x("div",E,[t[1]||(t[1]=d("img",{src:S,alt:"Логотип",class:"logo"},null,-1)),t[2]||(t[2]=d("h1",{class:"title"},"Статистика загрузок",-1)),o(i,{data:s.value,class:"table",style:{width:"100%"},onRowClick:v},{default:_(()=>[o(a,{prop:"full_name",label:"ФИО студента",align:"left",width:"350"}),o(a,{prop:"email",label:"E-mail",align:"left",width:"300"}),o(a,{prop:"details",label:"Подробности",align:"left"})]),_:1},8,["data"]),o(n,{class:"export-button",onClick:h},{default:_(()=>t[0]||(t[0]=[j(" Выгрузить в CSV ")])),_:1})])}}},O=C(M,[["__scopeId","data-v-351f29bb"]]);export{O as default};
