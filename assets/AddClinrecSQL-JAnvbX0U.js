import{_ as k,z as V,r as o,c as m,a,b as i,w as u,u as p,t as y,e as C,f as E,E as f,o as v,h as I,k as S,j as c,q as U,B as g}from"./index-B8tfgXD2.js";const w={class:"container"},B={class:"upload-section"},N={key:0,class:"uploaded-file"},D={class:"disclaimer"},F={__name:"AddClinrecSQL",setup(L){const s=V(),d=o([]),r=o(""),b=o(""),n=o(!1),_=l=>!0,x=async l=>{try{const e=new FormData;e.append("firstname",s.userInfo.firstname),e.append("lastname",s.userInfo.lastname),e.append("middlename",s.userInfo.middlename),e.append("fullname",s.userInfo.fullname),e.append("email",s.userInfo.email),e.append("file",l.file);const t=await E.uploadFile(e);f.success("Файл успешно загружен"),t.data&&t.data.url&&(b.value=t.data.url,r.value=l.file.name,d.value=[{name:l.file.name}],f.success("Файл успешно загружен!"))}catch(e){console.error("Ошибка загрузки файла:",e),d.value=[],e.response.data.error=="Uploaded file is not a valid SQLite database."&&f.error("Неверный формат файла")}};return(l,e)=>(v(),m("div",w,[e[4]||(e[4]=a("img",{src:I,alt:"Логотип",class:"logo"},null,-1)),e[5]||(e[5]=a("h1",{class:"title"},"Загрузка самостоятельных работ",-1)),a("div",B,[e[3]||(e[3]=a("label",{for:"sqlite-upload",class:"upload-label"},"Загрузите файл",-1)),i(p(U),{class:"upload-btn","http-request":x,"before-upload":_,"file-list":d.value,multiple:"false","show-file-list":""},{default:u(()=>[i(p(S),{type:"primary",class:"upload-button",disabled:!n.value},{default:u(()=>e[1]||(e[1]=[c(" Загрузить ")])),_:1},8,["disabled"])]),_:1},8,["file-list"]),r.value?(v(),m("div",N," Загруженный файл: "+y(r.value),1)):C("",!0),a("div",D,[i(p(g),{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t)},{default:u(()=>e[2]||(e[2]=[a("div",{class:"checkbox-text"},[c("Я соглашаюсь загружать только данные, относящиеся к моему учебному заданию. "),a("br"),c("Обязуюсь не загружать посторонние и/или недостоверные данные.")],-1)])),_:1},8,["modelValue"])])])]))}},Q=k(F,[["__scopeId","data-v-0ed1b27a"]]);export{Q as default};
