import{_ as N,r as U,s as z,c as V,a,b as o,F as E,d as B,w as n,v as F,f as y,E as c,x as d,o as v,h as x,m as M,n as D,y as R}from"./index-DDfAS0wQ.js";const S={class:"container"},T={class:"form"},Y={class:"form-group"},L={class:"form-group"},O={class:"form-group"},$={class:"icd-codes row"},j={class:"inline-form"},q={class:"form-group row"},A={class:"column"},G={class:"column"},H={class:"column"},J={class:"form-group row"},K={class:"column"},P={class:"column"},Q={class:"column"},W={class:"button-group"},X={__name:"EditClinrec",setup(Z){const f=F(),_=R(),b=f.params.id,l=U({documentId:"",diseaseName:"",mkb_code_list:["","",""],ageCategory:"",status:"",usage:"",approvalDate:"",publicationDate:"",revisionDate:""}),k=async()=>{try{const e=(await y.getDocument(b)).data;l.value={documentId:e.document_id,diseaseName:e.name,mkb_code_list:e.mkb_code||["","",""],ageCategory:e.age_category,status:e.status,usage:e.usage,approvalDate:e.approval_year?new Date(e.approval_year,0,1):"",publicationDate:e.date_publication?new Date(e.date_publication):"",revisionDate:e.revision_year?new Date(e.revision_year,0,1):""}}catch(t){console.error("Ошибка загрузки данных документа:",t),c.error("Не удалось загрузить данные документа.")}},w=async()=>{try{const t={document_id:l.value.documentId,name:l.value.diseaseName,mkb_code_list:l.value.mkb_code_list,age_category:l.value.ageCategory,status:l.value.status,usage:l.value.usage,approval_year:l.value.approvalDate?l.value.approvalDate.getFullYear():null,revision_year:l.value.revisionDate?l.value.revisionDate.getFullYear():null,date_publication:l.value.publicationDate?l.value.publicationDate.toISOString().split("T")[0]:null};await y.updateDocument(b,t),c.success("Данные успешно обновлены!"),_.push("/")}catch(t){console.error("Ошибка обновления данных:",t),c.error("Не удалось обновить данные.")}},C=()=>{_.push("/")};return z(()=>{k()}),(t,e)=>{const r=d("el-input"),u=d("el-option"),p=d("el-select"),m=d("el-date-picker"),g=d("el-button");return v(),V("div",S,[e[19]||(e[19]=a("img",{src:x,alt:"Логотип",class:"logo"},null,-1)),e[20]||(e[20]=a("h1",{class:"title"},"Редактировать клинические рекомендации",-1)),a("div",T,[a("div",Y,[e[8]||(e[8]=a("label",{for:"documentId",class:"label"},"ID документа",-1)),o(r,{id:"documentId",modelValue:l.value.documentId,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.documentId=s),class:"input",placeholder:"Введите ID документа",style:{width:"15vw"},disabled:""},null,8,["modelValue"])]),a("div",L,[e[9]||(e[9]=a("label",{for:"diseaseName",class:"label"},"Наименование заболевания",-1)),o(r,{id:"diseaseName",modelValue:l.value.diseaseName,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.diseaseName=s),class:"input",placeholder:"Введите наименование заболевания"},null,8,["modelValue"])]),a("div",O,[e[10]||(e[10]=a("label",{class:"label"},"Код МКБ",-1)),a("div",$,[(v(!0),V(E,null,B(l.value.mkb_code_list,(s,i)=>(v(),M(r,{key:i,modelValue:l.value.mkb_code_list[i],"onUpdate:modelValue":I=>l.value.mkb_code_list[i]=I,class:"input icd-input",placeholder:`Код ${i+1}`},null,8,["modelValue","onUpdate:modelValue","placeholder"]))),128))])]),a("div",j,[a("div",q,[a("div",A,[e[11]||(e[11]=a("label",{class:"label"},"Возрастная категория",-1)),o(p,{modelValue:l.value.ageCategory,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.ageCategory=s),class:"input",placeholder:"Выберите возрастную категорию",size:"large"},{default:n(()=>[o(u,{label:"Дети",value:"Дети"}),o(u,{label:"Взрослые",value:"Взрослые"}),o(u,{label:"Взрослые, Дети",value:"Взрослые, Дети"})]),_:1},8,["modelValue"])]),a("div",G,[e[12]||(e[12]=a("label",{class:"label"},"Статус",-1)),o(p,{modelValue:l.value.status,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.status=s),class:"input",placeholder:"Выберите статус",size:"large"},{default:n(()=>[o(u,{label:"Действует",value:"Действует"}),o(u,{label:"Утратил силу",value:"Утратил силу"})]),_:1},8,["modelValue"])]),a("div",H,[e[13]||(e[13]=a("label",{class:"label"},"Применение",-1)),o(p,{modelValue:l.value.usage,"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.usage=s),class:"input",placeholder:"Выберите применение",size:"large"},{default:n(()=>[o(u,{label:"Применяется",value:"Применяется"}),o(u,{label:"Применение отложено",value:"Применение отложено"})]),_:1},8,["modelValue"])])])]),a("div",J,[a("div",K,[e[14]||(e[14]=a("label",{class:"label"},"Дата утверждения",-1)),o(m,{modelValue:l.value.approvalDate,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.approvalDate=s),type:"date",placeholder:"Выберите дату",class:"input",size:"large"},null,8,["modelValue"])]),a("div",P,[e[15]||(e[15]=a("label",{class:"label"},"Дата публикации",-1)),o(m,{modelValue:l.value.publicationDate,"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.publicationDate=s),type:"date",placeholder:"Выберите дату",class:"input",size:"large"},null,8,["modelValue"])]),a("div",Q,[e[16]||(e[16]=a("label",{class:"label"},"Дата пересмотра",-1)),o(m,{modelValue:l.value.revisionDate,"onUpdate:modelValue":e[7]||(e[7]=s=>l.value.revisionDate=s),type:"date",placeholder:"Выберите дату",class:"input",size:"large"},null,8,["modelValue"])])]),a("div",W,[o(g,{type:"primary",class:"save-button",onClick:w},{default:n(()=>e[17]||(e[17]=[D("Применить")])),_:1}),o(g,{type:"danger",class:"cancel-button",onClick:C},{default:n(()=>e[18]||(e[18]=[D("Отменить")])),_:1})])])])}}},ee=N(X,[["__scopeId","data-v-aa875194"]]);export{ee as default};
